import{c as C,R as K,b7 as Bt,j as X,b8 as Ye,b9 as jt,r as z,ba as Fe,ay as ot,w as be,bb as lt,y as se,bc as Ne,bd as Dt,be as Me,bf as B,bg as Ke,bh as Te,bi as Ce,A as ke,o as ye,bj as ee,bk as he,ae as at,bl as Je,bm as Vt,bn as rt,bo as Nt,bp as Kt,bq as Ut,br as Wt,a0 as Ee,aC as ie,b1 as Ht,au as ut,bs as qt,bt as Gt,bu as Yt,b as J,K as Ue,b2 as te,l as W,s as L,Q as G,v as Y,S as F,V as oe,a1 as xe,P as N,q as H,x as le,T as Ae,aT as ct,U as ae,am as Jt,a9 as dt,a7 as Qt,a5 as We,a6 as He,ab as Xt,m as ve,al as ft,ac as Zt,a$ as ht,Z as pt,M as qe,N as Se,bv as mt,bw as gt,Y as en,$ as Re,bx as tn,by as nn,bz as sn,bA as on,a8 as vt,bB as ln,L as an,ax as rn,bC as un,bD as cn,bE as dn,bF as fn,bG as hn,bH as pn}from"./Dtp3W2Dl.js";import{u as mn,b as gn}from"./DcB2gpBD.js";const vn={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}},bn={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function de(e,s,t){let i=t.initialDeps??[],n;return()=>{var o,a,l,c;let u;t.key&&((o=t.debug)!=null&&o.call(t))&&(u=Date.now());const r=e();if(!(r.length!==i.length||r.some((b,O)=>i[O]!==b)))return n;i=r;let h;if(t.key&&((a=t.debug)!=null&&a.call(t))&&(h=Date.now()),n=s(...r),t.key&&((l=t.debug)!=null&&l.call(t))){const b=Math.round((Date.now()-u)*100)/100,O=Math.round((Date.now()-h)*100)/100,R=O/16,P=($,w)=>{for($=String($);$.length<w;)$=" "+$;return $};console.info(`%câ± ${P(O,5)} /${P(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,n),n}}function _e(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const yn=(e,s)=>Math.abs(e-s)<1,xn=(e,s,t)=>{let i;return function(...n){e.clearTimeout(i),i=e.setTimeout(()=>s.apply(this,n),t)}},Sn=e=>e,In=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let n=s;n<=t;n++)i.push(n);return i},On=(e,s)=>{const t=e.scrollElement;if(!t)return;const i=e.targetWindow;if(!i)return;const n=a=>{const{width:l,height:c}=a;s({width:Math.round(l),height:Math.round(c)})};if(n(t.getBoundingClientRect()),!i.ResizeObserver)return()=>{};const o=new i.ResizeObserver(a=>{const l=a[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){n({width:c.inlineSize,height:c.blockSize});return}}n(t.getBoundingClientRect())});return o.observe(t,{box:"border-box"}),()=>{o.unobserve(t)}},Qe={passive:!0},wn=typeof window>"u"?!0:"onscrollend"in window,Mn=(e,s)=>{const t=e.scrollElement;if(!t)return;const i=e.targetWindow;if(!i)return;let n=0;const o=e.options.useScrollendEvent&&wn?()=>{}:xn(i,()=>{s(n,!1)},e.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:r,isRtl:d}=e.options;n=r?t.scrollLeft*(d&&-1||1):t.scrollTop,o(),s(n,u)},l=a(!0),c=a(!1);return c(),t.addEventListener("scroll",l,Qe),t.addEventListener("scrollend",c,Qe),()=>{t.removeEventListener("scroll",l),t.removeEventListener("scrollend",c)}},Cn=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const i=s.borderBoxSize[0];if(i)return Math.round(i[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},kn=(e,{adjustments:s=0,behavior:t},i)=>{var n,o;const a=e+s;(o=(n=i.scrollElement)==null?void 0:n.scrollTo)==null||o.call(n,{[i.options.horizontal?"left":"top"]:a,behavior:t})};class En{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const i=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(o=>{this._measureElement(o.target,o)})}));return{disconnect:()=>{var n;(n=i())==null||n.disconnect(),t=null},observe:n=>{var o;return(o=i())==null?void 0:o.observe(n,{box:"border-box"})},unobserve:n=>{var o;return(o=i())==null?void 0:o.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([i,n])=>{typeof n>"u"&&delete t[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Sn,rangeExtractor:In,onChange:()=>{},measureElement:Cn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var i,n;(n=(i=this.options).onChange)==null||n.call(i,this,t)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,i)=>{const n=new Map,o=new Map;for(let a=i-1;a>=0;a--){const l=t[a];if(n.has(l.lane))continue;const c=o.get(l.lane);if(c==null||l.end>c.end?o.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,i,n,o,a)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:i,scrollMargin:n,getItemKey:o,enabled:a}),{key:!1}),this.getMeasurements=de(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:i,scrollMargin:n,getItemKey:o,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(r=>{this.itemSizeCache.set(r.key,r.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let r=c;r<t;r++){const d=o(r),h=this.options.lanes===1?u[r-1]:this.getFurthestMeasurement(u,r),b=h?h.end+this.options.gap:i+n,O=l.get(d),R=typeof O=="number"?O:this.options.estimateSize(r),P=b+R,$=h?h.lane:r%this.options.lanes;u[r]={index:r,start:b,size:R,end:P,key:d,lane:$}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,i,n)=>this.range=t.length>0&&i>0?Rn({measurements:t,outerSize:i,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=de(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,i,n,o)=>i===null?[]:t({startIndex:i.startIndex,endIndex:i.endIndex,overscan:n,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const i=this.options.indexAttribute,n=t.getAttribute(i);return n?parseInt(n,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(t,i)=>{const n=this.indexFromElement(t),o=this.measurementsCache[n];if(!o)return;const a=o.key,l=this.elementsCache.get(a);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(a,t)),t.isConnected&&this.resizeItem(n,this.options.measureElement(t,i,this))},this.resizeItem=(t,i)=>{const n=this.measurementsCache[t];if(!n)return;const o=this.itemSizeCache.get(n.key)??n.size,a=i-o;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,i)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((i,n)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(n))});return}this._measureElement(t,void 0)},this.getVirtualItems=de(()=>[this.getIndexes(),this.getMeasurements()],(t,i)=>{const n=[];for(let o=0,a=t.length;o<a;o++){const l=t[o],c=i[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const i=this.getMeasurements();if(i.length!==0)return _e(i[bt(0,i.length-1,n=>_e(i[n]).start,t)])},this.getOffsetForAlignment=(t,i)=>{const n=this.getSize(),o=this.getScrollOffset();i==="auto"&&t>=o+n&&(i="end"),i==="end"&&(t-=n);const a=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-n;return Math.max(Math.min(c,t),0)},this.getOffsetForIndex=(t,i="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.measurementsCache[t];if(!n)return;const o=this.getSize(),a=this.getScrollOffset();if(i==="auto")if(n.end>=a+o-this.options.scrollPaddingEnd)i="end";else if(n.start<=a+this.options.scrollPaddingStart)i="start";else return[a,i];const l=n.start-this.options.scrollPaddingStart+(n.size-o)/2;switch(i){case"center":return[this.getOffsetForAlignment(l,i),i];case"end":return[this.getOffsetForAlignment(n.end+this.options.scrollPaddingEnd,i),i];default:return[this.getOffsetForAlignment(n.start-this.options.scrollPaddingStart,i),i]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:i="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,i),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:i="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const o=this.getOffsetForIndex(t,i);if(!o)return;const[a,l]=o;this._scrollToOffset(a,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=_e(this.getOffsetForIndex(t,l));yn(u,this.getScrollOffset())||this.scrollToIndex(t,{align:l,behavior:n})}else this.scrollToIndex(t,{align:l,behavior:n})}))},this.scrollBy=(t,{behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var t;const i=this.getMeasurements();let n;return i.length===0?n=this.options.paddingStart:n=this.options.lanes===1?((t=i[i.length-1])==null?void 0:t.end)??0:Math.max(...i.slice(-this.options.lanes).map(o=>o.end)),Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:i,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const bt=(e,s,t,i)=>{for(;e<=s;){const n=(e+s)/2|0,o=t(n);if(o<i)e=n+1;else if(o>i)s=n-1;else return n}return e>0?e-1:0};function Rn({measurements:e,outerSize:s,scrollOffset:t}){const i=e.length-1,o=bt(0,i,l=>e[l].start,t);let a=o;for(;a<i&&e[a].end<t+s;)a++;return{startIndex:o,endIndex:a}}function $n(e){const s=new En(K(e)),t=Bt(s),i=s._didMount();return X(()=>K(e).getScrollElement(),n=>{n&&s._willUpdate()},{immediate:!0}),X(()=>K(e),n=>{s.setOptions({...n,onChange:(o,a)=>{var l;Ye(t),(l=n.onChange)==null||l.call(n,o,a)}}),s._willUpdate(),Ye(t)},{immediate:!0}),jt(i),t}function Tn(e){return $n(C(()=>({observeElementRect:On,observeElementOffset:Mn,scrollToFn:kn,...K(e)})))}function An(e,s,t){let i=z(t==null?void 0:t.value),n=C(()=>e.value!==void 0);return[C(()=>n.value?e.value:i.value),function(o){return n.value||(i.value=o),s==null?void 0:s(o)}]}function _n(){let e=Fe();return ot(()=>e.dispose()),e}function Pn(){let e=_n();return s=>{e.dispose(),e.nextFrame(s)}}function Xe(e){return[e.screenX,e.screenY]}function Fn(){let e=z([-1,-1]);return{wasMoved(s){let t=Xe(s);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(s){e.value=Xe(s)}}}function Ln({container:e,accept:s,walk:t,enabled:i}){be(()=>{let n=e.value;if(!n||i!==void 0&&!i.value)return;let o=lt(e);if(!o)return;let a=Object.assign(c=>s(c),{acceptNode:s}),l=o.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,a,!1);for(;l.nextNode();)t(l.currentNode)})}var yt=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(yt||{});function zn(e){throw new Error("Unexpected object: "+e)}var V=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(V||{});function Ze(e,s){let t=s.resolveItems();if(t.length<=0)return null;let i=s.resolveActiveIndex(),n=i??-1;switch(e.focus){case 0:{for(let o=0;o<t.length;++o)if(!s.resolveDisabled(t[o],o,t))return o;return i}case 1:{n===-1&&(n=t.length);for(let o=n-1;o>=0;--o)if(!s.resolveDisabled(t[o],o,t))return o;return i}case 2:{for(let o=n+1;o<t.length;++o)if(!s.resolveDisabled(t[o],o,t))return o;return i}case 3:{for(let o=t.length-1;o>=0;--o)if(!s.resolveDisabled(t[o],o,t))return o;return i}case 4:{for(let o=0;o<t.length;++o)if(s.resolveId(t[o],o,t)===e.id)return o;return i}case 5:return null;default:zn(e)}}function xt(e={},s=null,t=[]){for(let[i,n]of Object.entries(e))It(t,St(s,i),n);return t}function St(e,s){return e?e+"["+s+"]":s}function It(e,s,t){if(Array.isArray(t))for(let[i,n]of t.entries())It(e,St(s,i.toString()),n);else t instanceof Date?e.push([s,t.toISOString()]):typeof t=="boolean"?e.push([s,t?"1":"0"]):typeof t=="string"?e.push([s,t]):typeof t=="number"?e.push([s,`${t}`]):t==null?e.push([s,""]):xt(t,s,e)}var Bn={};function jn(e,s){return e===s}var Dn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Dn||{}),Vn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Vn||{}),Nn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Nn||{});let Ot=Symbol("ComboboxContext");function Ie(e){let s=ut(Ot,null);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ie),t}return s}let wt=Symbol("VirtualContext"),Kn=se({name:"VirtualProvider",setup(e,{slots:s}){let t=Ie("VirtualProvider"),i=C(()=>{let l=B(t.optionsRef);if(!l)return{start:0,end:0};let c=window.getComputedStyle(l);return{start:parseFloat(c.paddingBlockStart||c.paddingTop),end:parseFloat(c.paddingBlockEnd||c.paddingBottom)}}),n=Tn(C(()=>({scrollPaddingStart:i.value.start,scrollPaddingEnd:i.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return B(t.optionsRef)},overscan:12}))),o=C(()=>{var l;return(l=t.virtual.value)==null?void 0:l.options}),a=z(0);return X([o],()=>{a.value+=1}),rt(wt,t.virtual.value?n:null),()=>[ke("div",{style:{position:"relative",width:"100%",height:`${n.value.getTotalSize()}px`},ref:l=>{if(l){if(typeof process<"u"&&Bn.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&n.value.scrollToIndex(t.activeOptionIndex.value)}}},n.value.getVirtualItems().map(l=>Gt(s.default({option:t.virtual.value.options[l.index],open:t.comboboxState.value===0})[0],{key:`${a.value}-${l.index}`,"data-index":l.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":l.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})))]}}),Un=se({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:s,attrs:t,emit:i}){let n=z(1),o=z(null),a=z(null),l=z(null),c=z(null),u=z({static:!1,hold:!1}),r=z([]),d=z(null),h=z(2),b=z(!1);function O(v=g=>g){let g=d.value!==null?r.value[d.value]:null,S=v(r.value.slice()),f=S.length>0&&S[0].dataRef.order.value!==null?S.sort((I,M)=>I.dataRef.order.value-M.dataRef.order.value):Yt(S,I=>B(I.dataRef.domRef)),m=g?f.indexOf(g):null;return m===-1&&(m=null),{options:f,activeOptionIndex:m}}let R=C(()=>e.multiple?1:0),P=C(()=>e.nullable),[$,w]=An(C(()=>e.modelValue),v=>i("update:modelValue",v),C(()=>e.defaultValue)),T=C(()=>$.value===void 0?he(R.value,{1:[],0:void 0}):$.value),j=null,x=null;function _(v){return he(R.value,{0(){return w==null?void 0:w(v)},1:()=>{let g=ie(p.value.value).slice(),S=ie(v),f=g.findIndex(m=>p.compare(S,ie(m)));return f===-1?g.push(S):g.splice(f,1),w==null?void 0:w(g)}})}let y=C(()=>{});X([y],([v],[g])=>{if(p.virtual.value&&v&&g&&d.value!==null){let S=v.indexOf(g[d.value]);S!==-1?d.value=S:d.value=null}});let p={comboboxState:n,value:T,mode:R,compare(v,g){if(typeof e.by=="string"){let S=e.by;return(v==null?void 0:v[S])===(g==null?void 0:g[S])}return e.by===null?jn(v,g):e.by(v,g)},calculateIndex(v){return p.virtual.value?e.by===null?p.virtual.value.options.indexOf(v):p.virtual.value.options.findIndex(g=>p.compare(g,v)):r.value.findIndex(g=>p.compare(g.dataRef.value,v))},defaultValue:C(()=>e.defaultValue),nullable:P,immediate:C(()=>!1),virtual:C(()=>null),inputRef:a,labelRef:o,buttonRef:l,optionsRef:c,disabled:C(()=>e.disabled),options:r,change(v){w(v)},activeOptionIndex:C(()=>{if(b.value&&d.value===null&&(p.virtual.value?p.virtual.value.options.length>0:r.value.length>0)){if(p.virtual.value){let g=p.virtual.value.options.findIndex(S=>{var f;return!((f=p.virtual.value)!=null&&f.disabled(S))});if(g!==-1)return g}let v=r.value.findIndex(g=>!g.dataRef.disabled);if(v!==-1)return v}return d.value}),activationTrigger:h,optionsPropsRef:u,closeCombobox(){b.value=!1,!e.disabled&&n.value!==1&&(n.value=1,d.value=null)},openCombobox(){if(b.value=!0,!e.disabled&&n.value!==0){if(p.value.value){let v=p.calculateIndex(p.value.value);v!==-1&&(d.value=v)}n.value=0}},setActivationTrigger(v){h.value=v},goToOption(v,g,S){b.value=!1,j!==null&&cancelAnimationFrame(j),j=requestAnimationFrame(()=>{if(e.disabled||c.value&&!u.value.static&&n.value===1)return;if(p.virtual.value){d.value=v===V.Specific?g:Ze({focus:v},{resolveItems:()=>p.virtual.value.options,resolveActiveIndex:()=>{var I,M;return(M=(I=p.activeOptionIndex.value)!=null?I:p.virtual.value.options.findIndex(A=>{var D;return!((D=p.virtual.value)!=null&&D.disabled(A))}))!=null?M:null},resolveDisabled:I=>p.virtual.value.disabled(I),resolveId(){throw new Error("Function not implemented.")}}),h.value=S??2;return}let f=O();if(f.activeOptionIndex===null){let I=f.options.findIndex(M=>!M.dataRef.disabled);I!==-1&&(f.activeOptionIndex=I)}let m=v===V.Specific?g:Ze({focus:v},{resolveItems:()=>f.options,resolveActiveIndex:()=>f.activeOptionIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});d.value=m,h.value=S??2,r.value=f.options})},selectOption(v){let g=r.value.find(f=>f.id===v);if(!g)return;let{dataRef:S}=g;_(S.value)},selectActiveOption(){if(p.activeOptionIndex.value!==null){if(p.virtual.value)_(p.virtual.value.options[p.activeOptionIndex.value]);else{let{dataRef:v}=r.value[p.activeOptionIndex.value];_(v.value)}p.goToOption(V.Specific,p.activeOptionIndex.value)}},registerOption(v,g){let S=Ht({id:v,dataRef:g});if(p.virtual.value){r.value.push(S);return}x&&cancelAnimationFrame(x);let f=O(m=>(m.push(S),m));d.value===null&&p.isSelected(g.value.value)&&(f.activeOptionIndex=f.options.indexOf(S)),r.value=f.options,d.value=f.activeOptionIndex,h.value=2,f.options.some(m=>!B(m.dataRef.domRef))&&(x=requestAnimationFrame(()=>{let m=O();r.value=m.options,d.value=m.activeOptionIndex}))},unregisterOption(v,g){if(j!==null&&cancelAnimationFrame(j),g&&(b.value=!0),p.virtual.value){r.value=r.value.filter(f=>f.id!==v);return}let S=O(f=>{let m=f.findIndex(I=>I.id===v);return m!==-1&&f.splice(m,1),f});r.value=S.options,d.value=S.activeOptionIndex,h.value=2},isSelected(v){return he(R.value,{0:()=>p.compare(ie(p.value.value),ie(v)),1:()=>ie(p.value.value).some(g=>p.compare(ie(g),ie(v)))})},isActive(v){return d.value===p.calculateIndex(v)}};Vt([a,l,c],()=>p.closeCombobox(),C(()=>n.value===0)),rt(Ot,p),Nt(C(()=>he(n.value,{0:Me.Open,1:Me.Closed})));let k=C(()=>{var v;return(v=B(a))==null?void 0:v.closest("form")});return ye(()=>{X([k],()=>{if(!k.value||e.defaultValue===void 0)return;function v(){p.change(e.defaultValue)}return k.value.addEventListener("reset",v),()=>{var g;(g=k.value)==null||g.removeEventListener("reset",v)}},{immediate:!0})}),()=>{var v,g,S;let{name:f,disabled:m,form:I,...M}=e,A={open:n.value===0,disabled:m,activeIndex:p.activeOptionIndex.value,activeOption:p.activeOptionIndex.value===null?null:p.virtual.value?p.virtual.value.options[(v=p.activeOptionIndex.value)!=null?v:0]:(S=(g=p.options.value[p.activeOptionIndex.value])==null?void 0:g.dataRef.value)!=null?S:null,value:T.value};return ke(Ee,[...f!=null&&T.value!=null?xt({[f]:T.value}).map(([D,Z])=>ke(Kt,Ut({features:Wt.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:I,disabled:m,name:D,value:Z}))):[],Te({theirProps:{...t,...Ke(M,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:A,slots:s,attrs:t,name:"Combobox"})])}}}),Wn=se({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:s,attrs:t,slots:i,expose:n}){var o;let a=(o=e.id)!=null?o:`headlessui-combobox-input-${Ne()}`,l=Ie("ComboboxInput"),c=C(()=>lt(B(l.inputRef))),u={value:!1};n({el:l.inputRef,$el:l.inputRef});function r(){l.change(null);let x=B(l.optionsRef);x&&(x.scrollTop=0),l.goToOption(V.Nothing)}let d=C(()=>{var x;let _=l.value.value;return B(l.inputRef)?typeof e.displayValue<"u"&&_!==void 0?(x=e.displayValue(_))!=null?x:"":typeof _=="string"?_:"":""});ye(()=>{X([d,l.comboboxState,c],([x,_],[y,p])=>{if(u.value)return;let k=B(l.inputRef);k&&((p===0&&_===1||x!==y)&&(k.value=x),requestAnimationFrame(()=>{var v;if(u.value||!k||((v=c.value)==null?void 0:v.activeElement)!==k)return;let{selectionStart:g,selectionEnd:S}=k;Math.abs((S??0)-(g??0))===0&&g===0&&k.setSelectionRange(k.value.length,k.value.length)}))},{immediate:!0}),X([l.comboboxState],([x],[_])=>{if(x===0&&_===1){if(u.value)return;let y=B(l.inputRef);if(!y)return;let p=y.value,{selectionStart:k,selectionEnd:v,selectionDirection:g}=y;y.value="",y.value=p,g!==null?y.setSelectionRange(k,v,g):y.setSelectionRange(k,v)}})});let h=z(!1);function b(){h.value=!0}function O(){Fe().nextFrame(()=>{h.value=!1})}let R=Pn();function P(x){switch(u.value=!0,R(()=>{u.value=!1}),x.key){case ee.Enter:if(u.value=!1,l.comboboxState.value!==0||h.value)return;if(x.preventDefault(),x.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case ee.ArrowDown:return u.value=!1,x.preventDefault(),x.stopPropagation(),he(l.comboboxState.value,{0:()=>l.goToOption(V.Next),1:()=>l.openCombobox()});case ee.ArrowUp:return u.value=!1,x.preventDefault(),x.stopPropagation(),he(l.comboboxState.value,{0:()=>l.goToOption(V.Previous),1:()=>{l.openCombobox(),at(()=>{l.value.value||l.goToOption(V.Last)})}});case ee.Home:if(x.shiftKey)break;return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.First);case ee.PageUp:return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.First);case ee.End:if(x.shiftKey)break;return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.Last);case ee.PageDown:return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.Last);case ee.Escape:if(u.value=!1,l.comboboxState.value!==0)return;x.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&x.stopPropagation(),l.nullable.value&&l.mode.value===0&&l.value.value===null&&r(),l.closeCombobox();break;case ee.Tab:if(u.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.activationTrigger.value!==1&&l.selectActiveOption(),l.closeCombobox();break}}function $(x){s("change",x),l.nullable.value&&l.mode.value===0&&x.target.value===""&&r(),l.openCombobox()}function w(x){var _,y,p;let k=(_=x.relatedTarget)!=null?_:Je.find(v=>v!==x.currentTarget);if(u.value=!1,!((y=B(l.optionsRef))!=null&&y.contains(k))&&!((p=B(l.buttonRef))!=null&&p.contains(k))&&l.comboboxState.value===0)return x.preventDefault(),l.mode.value===0&&(l.nullable.value&&l.value.value===null?r():l.activationTrigger.value!==1&&l.selectActiveOption()),l.closeCombobox()}function T(x){var _,y,p;let k=(_=x.relatedTarget)!=null?_:Je.find(v=>v!==x.currentTarget);(y=B(l.buttonRef))!=null&&y.contains(k)||(p=B(l.optionsRef))!=null&&p.contains(k)||l.disabled.value||l.immediate.value&&l.comboboxState.value!==0&&(l.openCombobox(),Fe().nextFrame(()=>{l.setActivationTrigger(1)}))}let j=C(()=>{var x,_,y,p;return(p=(y=(_=e.defaultValue)!=null?_:l.defaultValue.value!==void 0?(x=e.displayValue)==null?void 0:x.call(e,l.defaultValue.value):null)!=null?y:l.defaultValue.value)!=null?p:""});return()=>{var x,_,y,p,k,v,g;let S={open:l.comboboxState.value===0},{displayValue:f,onChange:m,...I}=e,M={"aria-controls":(x=l.optionsRef.value)==null?void 0:x.id,"aria-expanded":l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null?void 0:l.virtual.value?(_=l.options.value.find(A=>!l.virtual.value.disabled(A.dataRef.value)&&l.compare(A.dataRef.value,l.virtual.value.options[l.activeOptionIndex.value])))==null?void 0:_.id:(y=l.options.value[l.activeOptionIndex.value])==null?void 0:y.id,"aria-labelledby":(v=(p=B(l.labelRef))==null?void 0:p.id)!=null?v:(k=B(l.buttonRef))==null?void 0:k.id,"aria-autocomplete":"list",id:a,onCompositionstart:b,onCompositionend:O,onKeydown:P,onInput:$,onFocus:T,onBlur:w,role:"combobox",type:(g=t.type)!=null?g:"text",tabIndex:0,ref:l.inputRef,defaultValue:j.value,disabled:l.disabled.value===!0?!0:void 0};return Te({ourProps:M,theirProps:I,slot:S,attrs:t,slots:i,features:Ce.RenderStrategy|Ce.Static,name:"ComboboxInput"})}}}),Hn=se({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:s,slots:t,expose:i}){let n=Ie("ComboboxOptions"),o=`headlessui-combobox-options-${Ne()}`;i({el:n.optionsRef,$el:n.optionsRef}),be(()=>{n.optionsPropsRef.value.static=e.static}),be(()=>{n.optionsPropsRef.value.hold=e.hold});let a=Dt(),l=C(()=>a!==null?(a.value&Me.Open)===Me.Open:n.comboboxState.value===0);Ln({container:C(()=>B(n.optionsRef)),enabled:C(()=>n.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function c(u){u.preventDefault()}return()=>{var u,r,d;let h={open:n.comboboxState.value===0},b={"aria-labelledby":(d=(u=B(n.labelRef))==null?void 0:u.id)!=null?d:(r=B(n.buttonRef))==null?void 0:r.id,id:o,ref:n.optionsRef,role:"listbox","aria-multiselectable":n.mode.value===1?!0:void 0,onMousedown:c},O=Ke(e,["hold"]);return Te({ourProps:b,theirProps:O,slot:h,attrs:s,slots:n.virtual.value&&n.comboboxState.value===0?{...t,default:()=>[ke(Kn,{},t.default)]}:t,features:Ce.RenderStrategy|Ce.Static,visible:l.value,name:"ComboboxOptions"})}}}),qn=se({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:s,attrs:t,expose:i}){let n=Ie("ComboboxOption"),o=`headlessui-combobox-option-${Ne()}`,a=z(null),l=C(()=>e.disabled);i({el:a,$el:a});let c=C(()=>{var w;return n.virtual.value?n.activeOptionIndex.value===n.calculateIndex(e.value):n.activeOptionIndex.value===null?!1:((w=n.options.value[n.activeOptionIndex.value])==null?void 0:w.id)===o}),u=C(()=>n.isSelected(e.value)),r=ut(wt,null),d=C(()=>({disabled:e.disabled,value:e.value,domRef:a,order:C(()=>e.order)}));ye(()=>n.registerOption(o,d)),ot(()=>n.unregisterOption(o,c.value)),be(()=>{let w=B(a);w&&(r==null||r.value.measureElement(w))}),be(()=>{n.comboboxState.value===0&&c.value&&(n.virtual.value||n.activationTrigger.value!==0&&at(()=>{var w,T;return(T=(w=B(a))==null?void 0:w.scrollIntoView)==null?void 0:T.call(w,{block:"nearest"})}))});function h(w){w.preventDefault(),w.button===yt.Left&&(l.value||(n.selectOption(o),qt()||requestAnimationFrame(()=>{var T;return(T=B(n.inputRef))==null?void 0:T.focus({preventScroll:!0})}),n.mode.value===0&&n.closeCombobox()))}function b(){var w;if(e.disabled||(w=n.virtual.value)!=null&&w.disabled(e.value))return n.goToOption(V.Nothing);let T=n.calculateIndex(e.value);n.goToOption(V.Specific,T)}let O=Fn();function R(w){O.update(w)}function P(w){var T;if(!O.wasMoved(w)||e.disabled||(T=n.virtual.value)!=null&&T.disabled(e.value)||c.value)return;let j=n.calculateIndex(e.value);n.goToOption(V.Specific,j,0)}function $(w){var T;O.wasMoved(w)&&(e.disabled||(T=n.virtual.value)!=null&&T.disabled(e.value)||c.value&&(n.optionsPropsRef.value.hold||n.goToOption(V.Nothing)))}return()=>{let{disabled:w}=e,T={active:c.value,selected:u.value,disabled:w},j={id:o,ref:a,role:"option",tabIndex:w===!0?void 0:-1,"aria-disabled":w===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onMousedown:h,onFocus:b,onPointerenter:R,onMouseenter:R,onPointermove:P,onMousemove:P,onPointerleave:$,onMouseleave:$},x=Ke(e,["order","value"]);return Te({ourProps:j,theirProps:x,slot:T,attrs:t,slots:s,name:"ComboboxOption"})}}});function ne(e){return Array.isArray?Array.isArray(e):kt(e)==="[object Array]"}function Gn(e){if(typeof e=="string")return e;let s=e+"";return s=="0"&&1/e==-1/0?"-0":s}function Yn(e){return e==null?"":Gn(e)}function Q(e){return typeof e=="string"}function Mt(e){return typeof e=="number"}function Jn(e){return e===!0||e===!1||Qn(e)&&kt(e)=="[object Boolean]"}function Ct(e){return typeof e=="object"}function Qn(e){return Ct(e)&&e!==null}function U(e){return e!=null}function Pe(e){return!e.trim().length}function kt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Xn="Incorrect 'index' type",Zn=e=>`Invalid value for key ${e}`,es=e=>`Pattern length exceeds max of ${e}.`,ts=e=>`Missing ${e} property in key`,ns=e=>`Property 'weight' in key '${e}' must be a positive integer`,et=Object.prototype.hasOwnProperty;class ss{constructor(s){this._keys=[],this._keyMap={};let t=0;s.forEach(i=>{let n=Et(i);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(i=>{i.weight/=t})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Et(e){let s=null,t=null,i=null,n=1,o=null;if(Q(e)||ne(e))i=e,s=tt(e),t=Le(e);else{if(!et.call(e,"name"))throw new Error(ts("name"));const a=e.name;if(i=a,et.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(ns(a));s=tt(a),t=Le(a),o=e.getFn}return{path:s,id:t,weight:n,src:i,getFn:o}}function tt(e){return ne(e)?e:e.split(".")}function Le(e){return ne(e)?e.join("."):e}function is(e,s){let t=[],i=!1;const n=(o,a,l)=>{if(U(o))if(!a[l])t.push(o);else{let c=a[l];const u=o[c];if(!U(u))return;if(l===a.length-1&&(Q(u)||Mt(u)||Jn(u)))t.push(Yn(u));else if(ne(u)){i=!0;for(let r=0,d=u.length;r<d;r+=1)n(u[r],a,l+1)}else a.length&&n(u,a,l+1)}};return n(e,Q(s)?s.split("."):s,0),i?t:t[0]}const os={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ls={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,s)=>e.score===s.score?e.idx<s.idx?-1:1:e.score<s.score?-1:1},as={location:0,threshold:.6,distance:100},rs={useExtendedSearch:!1,getFn:is,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var E={...ls,...os,...as,...rs};const us=/[^ ]+/g;function cs(e=1,s=3){const t=new Map,i=Math.pow(10,s);return{get(n){const o=n.match(us).length;if(t.has(o))return t.get(o);const a=1/Math.pow(o,.5*e),l=parseFloat(Math.round(a*i)/i);return t.set(o,l),l},clear(){t.clear()}}}class Ge{constructor({getFn:s=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){this.norm=cs(t,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((s,t)=>{this._addString(s,t)}):this.docs.forEach((s,t)=>{this._addObject(s,t)}),this.norm.clear())}add(s){const t=this.size();Q(s)?this._addString(s,t):this._addObject(s,t)}removeAt(s){this.records.splice(s,1);for(let t=s,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(s,t){return s[this._keysMap[t]]}size(){return this.records.length}_addString(s,t){if(!U(s)||Pe(s))return;let i={v:s,i:t,n:this.norm.get(s)};this.records.push(i)}_addObject(s,t){let i={i:t,$:{}};this.keys.forEach((n,o)=>{let a=n.getFn?n.getFn(s):this.getFn(s,n.path);if(U(a)){if(ne(a)){let l=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:u,value:r}=c.pop();if(U(r))if(Q(r)&&!Pe(r)){let d={v:r,i:u,n:this.norm.get(r)};l.push(d)}else ne(r)&&r.forEach((d,h)=>{c.push({nestedArrIndex:h,value:d})})}i.$[o]=l}else if(Q(a)&&!Pe(a)){let l={v:a,n:this.norm.get(a)};i.$[o]=l}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Rt(e,s,{getFn:t=E.getFn,fieldNormWeight:i=E.fieldNormWeight}={}){const n=new Ge({getFn:t,fieldNormWeight:i});return n.setKeys(e.map(Et)),n.setSources(s),n.create(),n}function ds(e,{getFn:s=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){const{keys:i,records:n}=e,o=new Ge({getFn:s,fieldNormWeight:t});return o.setKeys(i),o.setIndexRecords(n),o}function we(e,{errors:s=0,currentLocation:t=0,expectedLocation:i=0,distance:n=E.distance,ignoreLocation:o=E.ignoreLocation}={}){const a=s/e.length;if(o)return a;const l=Math.abs(i-t);return n?a+l/n:l?1:a}function fs(e=[],s=E.minMatchCharLength){let t=[],i=-1,n=-1,o=0;for(let a=e.length;o<a;o+=1){let l=e[o];l&&i===-1?i=o:!l&&i!==-1&&(n=o-1,n-i+1>=s&&t.push([i,n]),i=-1)}return e[o-1]&&o-i>=s&&t.push([i,o-1]),t}const ce=32;function hs(e,s,t,{location:i=E.location,distance:n=E.distance,threshold:o=E.threshold,findAllMatches:a=E.findAllMatches,minMatchCharLength:l=E.minMatchCharLength,includeMatches:c=E.includeMatches,ignoreLocation:u=E.ignoreLocation}={}){if(s.length>ce)throw new Error(es(ce));const r=s.length,d=e.length,h=Math.max(0,Math.min(i,d));let b=o,O=h;const R=l>1||c,P=R?Array(d):[];let $;for(;($=e.indexOf(s,O))>-1;){let y=we(s,{currentLocation:$,expectedLocation:h,distance:n,ignoreLocation:u});if(b=Math.min(y,b),O=$+r,R){let p=0;for(;p<r;)P[$+p]=1,p+=1}}O=-1;let w=[],T=1,j=r+d;const x=1<<r-1;for(let y=0;y<r;y+=1){let p=0,k=j;for(;p<k;)we(s,{errors:y,currentLocation:h+k,expectedLocation:h,distance:n,ignoreLocation:u})<=b?p=k:j=k,k=Math.floor((j-p)/2+p);j=k;let v=Math.max(1,h-k+1),g=a?d:Math.min(h+k,d)+r,S=Array(g+2);S[g+1]=(1<<y)-1;for(let m=g;m>=v;m-=1){let I=m-1,M=t[e.charAt(I)];if(R&&(P[I]=+!!M),S[m]=(S[m+1]<<1|1)&M,y&&(S[m]|=(w[m+1]|w[m])<<1|1|w[m+1]),S[m]&x&&(T=we(s,{errors:y,currentLocation:I,expectedLocation:h,distance:n,ignoreLocation:u}),T<=b)){if(b=T,O=I,O<=h)break;v=Math.max(1,2*h-O)}}if(we(s,{errors:y+1,currentLocation:h,expectedLocation:h,distance:n,ignoreLocation:u})>b)break;w=S}const _={isMatch:O>=0,score:Math.max(.001,T)};if(R){const y=fs(P,l);y.length?c&&(_.indices=y):_.isMatch=!1}return _}function ps(e){let s={};for(let t=0,i=e.length;t<i;t+=1){const n=e.charAt(t);s[n]=(s[n]||0)|1<<i-t-1}return s}class $t{constructor(s,{location:t=E.location,threshold:i=E.threshold,distance:n=E.distance,includeMatches:o=E.includeMatches,findAllMatches:a=E.findAllMatches,minMatchCharLength:l=E.minMatchCharLength,isCaseSensitive:c=E.isCaseSensitive,ignoreLocation:u=E.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:n,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?s:s.toLowerCase(),this.chunks=[],!this.pattern.length)return;const r=(h,b)=>{this.chunks.push({pattern:h,alphabet:ps(h),startIndex:b})},d=this.pattern.length;if(d>ce){let h=0;const b=d%ce,O=d-b;for(;h<O;)r(this.pattern.substr(h,ce),h),h+=ce;if(b){const R=d-ce;r(this.pattern.substr(R),R)}}else r(this.pattern,0)}searchIn(s){const{isCaseSensitive:t,includeMatches:i}=this.options;if(t||(s=s.toLowerCase()),this.pattern===s){let O={isMatch:!0,score:0};return i&&(O.indices=[[0,s.length-1]]),O}const{location:n,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let r=[],d=0,h=!1;this.chunks.forEach(({pattern:O,alphabet:R,startIndex:P})=>{const{isMatch:$,score:w,indices:T}=hs(s,O,R,{location:n+P,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:c,includeMatches:i,ignoreLocation:u});$&&(h=!0),d+=w,$&&T&&(r=[...r,...T])});let b={isMatch:h,score:h?d/this.chunks.length:1};return h&&i&&(b.indices=r),b}}class re{constructor(s){this.pattern=s}static isMultiMatch(s){return nt(s,this.multiRegex)}static isSingleMatch(s){return nt(s,this.singleRegex)}search(){}}function nt(e,s){const t=e.match(s);return t?t[1]:null}class ms extends re{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const t=s===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class gs extends re{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const i=s.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,s.length-1]}}}class vs extends re{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const t=s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class bs extends re{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const t=!s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class ys extends re{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const t=s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class xs extends re{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const t=!s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class Tt extends re{constructor(s,{location:t=E.location,threshold:i=E.threshold,distance:n=E.distance,includeMatches:o=E.includeMatches,findAllMatches:a=E.findAllMatches,minMatchCharLength:l=E.minMatchCharLength,isCaseSensitive:c=E.isCaseSensitive,ignoreLocation:u=E.ignoreLocation}={}){super(s),this._bitapSearch=new $t(s,{location:t,threshold:i,distance:n,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}}class At extends re{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let t=0,i;const n=[],o=this.pattern.length;for(;(i=s.indexOf(this.pattern,t))>-1;)t=i+o,n.push([i,t-1]);const a=!!n.length;return{isMatch:a,score:a?0:1,indices:n}}}const ze=[ms,At,vs,bs,xs,ys,gs,Tt],st=ze.length,Ss=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Is="|";function Os(e,s={}){return e.split(Is).map(t=>{let i=t.trim().split(Ss).filter(o=>o&&!!o.trim()),n=[];for(let o=0,a=i.length;o<a;o+=1){const l=i[o];let c=!1,u=-1;for(;!c&&++u<st;){const r=ze[u];let d=r.isMultiMatch(l);d&&(n.push(new r(d,s)),c=!0)}if(!c)for(u=-1;++u<st;){const r=ze[u];let d=r.isSingleMatch(l);if(d){n.push(new r(d,s));break}}}return n})}const ws=new Set([Tt.type,At.type]);class Ms{constructor(s,{isCaseSensitive:t=E.isCaseSensitive,includeMatches:i=E.includeMatches,minMatchCharLength:n=E.minMatchCharLength,ignoreLocation:o=E.ignoreLocation,findAllMatches:a=E.findAllMatches,location:l=E.location,threshold:c=E.threshold,distance:u=E.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:i,minMatchCharLength:n,findAllMatches:a,ignoreLocation:o,location:l,threshold:c,distance:u},this.pattern=t?s:s.toLowerCase(),this.query=Os(this.pattern,this.options)}static condition(s,t){return t.useExtendedSearch}searchIn(s){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:n}=this.options;s=n?s:s.toLowerCase();let o=0,a=[],l=0;for(let c=0,u=t.length;c<u;c+=1){const r=t[c];a.length=0,o=0;for(let d=0,h=r.length;d<h;d+=1){const b=r[d],{isMatch:O,indices:R,score:P}=b.search(s);if(O){if(o+=1,l+=P,i){const $=b.constructor.type;ws.has($)?a=[...a,...R]:a.push(R)}}else{l=0,o=0,a.length=0;break}}if(o){let d={isMatch:!0,score:l/o};return i&&(d.indices=a),d}}return{isMatch:!1,score:1}}}const Be=[];function Cs(...e){Be.push(...e)}function je(e,s){for(let t=0,i=Be.length;t<i;t+=1){let n=Be[t];if(n.condition(e,s))return new n(e,s)}return new $t(e,s)}const $e={AND:"$and",OR:"$or"},De={PATH:"$path",PATTERN:"$val"},Ve=e=>!!(e[$e.AND]||e[$e.OR]),ks=e=>!!e[De.PATH],Es=e=>!ne(e)&&Ct(e)&&!Ve(e),it=e=>({[$e.AND]:Object.keys(e).map(s=>({[s]:e[s]}))});function _t(e,s,{auto:t=!0}={}){const i=n=>{let o=Object.keys(n);const a=ks(n);if(!a&&o.length>1&&!Ve(n))return i(it(n));if(Es(n)){const c=a?n[De.PATH]:o[0],u=a?n[De.PATTERN]:n[c];if(!Q(u))throw new Error(Zn(c));const r={keyId:Le(c),pattern:u};return t&&(r.searcher=je(u,s)),r}let l={children:[],operator:o[0]};return o.forEach(c=>{const u=n[c];ne(u)&&u.forEach(r=>{l.children.push(i(r))})}),l};return Ve(e)||(e=it(e)),i(e)}function Rs(e,{ignoreFieldNorm:s=E.ignoreFieldNorm}){e.forEach(t=>{let i=1;t.matches.forEach(({key:n,norm:o,score:a})=>{const l=n?n.weight:null;i*=Math.pow(a===0&&l?Number.EPSILON:a,(l||1)*(s?1:o))}),t.score=i})}function $s(e,s){const t=e.matches;s.matches=[],U(t)&&t.forEach(i=>{if(!U(i.indices)||!i.indices.length)return;const{indices:n,value:o}=i;let a={indices:n,value:o};i.key&&(a.key=i.key.src),i.idx>-1&&(a.refIndex=i.idx),s.matches.push(a)})}function Ts(e,s){s.score=e.score}function As(e,s,{includeMatches:t=E.includeMatches,includeScore:i=E.includeScore}={}){const n=[];return t&&n.push($s),i&&n.push(Ts),e.map(o=>{const{idx:a}=o,l={item:s[a],refIndex:a};return n.length&&n.forEach(c=>{c(o,l)}),l})}class pe{constructor(s,t={},i){this.options={...E,...t},this.options.useExtendedSearch,this._keyStore=new ss(this.options.keys),this.setCollection(s,i)}setCollection(s,t){if(this._docs=s,t&&!(t instanceof Ge))throw new Error(Xn);this._myIndex=t||Rt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){U(s)&&(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const t=[];for(let i=0,n=this._docs.length;i<n;i+=1){const o=this._docs[i];s(o,i)&&(this.removeAt(i),i-=1,n-=1,t.push(o))}return t}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:t=-1}={}){const{includeMatches:i,includeScore:n,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=Q(s)?Q(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return Rs(c,{ignoreFieldNorm:l}),o&&c.sort(a),Mt(t)&&t>-1&&(c=c.slice(0,t)),As(c,this._docs,{includeMatches:i,includeScore:n})}_searchStringList(s){const t=je(s,this.options),{records:i}=this._myIndex,n=[];return i.forEach(({v:o,i:a,n:l})=>{if(!U(o))return;const{isMatch:c,score:u,indices:r}=t.searchIn(o);c&&n.push({item:o,idx:a,matches:[{score:u,value:o,norm:l,indices:r}]})}),n}_searchLogical(s){const t=_t(s,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:d,searcher:h}=l,b=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:h});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const r=[];for(let d=0,h=l.children.length;d<h;d+=1){const b=l.children[d],O=i(b,c,u);if(O.length)r.push(...O);else if(l.operator===$e.AND)return[]}return r},n=this._myIndex.records,o={},a=[];return n.forEach(({$:l,i:c})=>{if(U(l)){let u=i(t,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),u.forEach(({matches:r})=>{o[c].matches.push(...r)}))}}),a}_searchObjectList(s){const t=je(s,this.options),{keys:i,records:n}=this._myIndex,o=[];return n.forEach(({$:a,i:l})=>{if(!U(a))return;let c=[];i.forEach((u,r)=>{c.push(...this._findMatches({key:u,value:a[r],searcher:t}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:s,value:t,searcher:i}){if(!U(t))return[];let n=[];if(ne(t))t.forEach(({v:o,i:a,n:l})=>{if(!U(o))return;const{isMatch:c,score:u,indices:r}=i.searchIn(o);c&&n.push({score:u,key:s,value:o,idx:a,norm:l,indices:r})});else{const{v:o,n:a}=t,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&n.push({score:c,key:s,value:o,norm:a,indices:u})}return n}}pe.version="7.0.0";pe.createIndex=Rt;pe.parseIndex=ds;pe.config=E;pe.parseQuery=_t;Cs(Ms);function _s(e,s,t){const i=()=>{var a,l;return new pe((a=J(s))!=null?a:[],(l=J(t))==null?void 0:l.fuseOptions)},n=z(i());X(()=>{var a;return(a=J(t))==null?void 0:a.fuseOptions},()=>{n.value=i()},{deep:!0}),X(()=>J(s),a=>{n.value.setCollection(a)},{deep:!0});const o=C(()=>{const a=J(t);if(a!=null&&a.matchAllWhenSearchEmpty&&!J(e))return J(s).map((c,u)=>({item:c,refIndex:u}));const l=a==null?void 0:a.resultLimit;return n.value.search(J(e),l?{limit:l}:void 0)});return{fuse:n,results:o}}const Ps=se({components:{HComboboxOption:qn,UIcon:Ae,UAvatar:ct,UKbd:dt},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const s=C(()=>{const i=e.group[e.groupAttribute];return typeof i=="function"?i(e.query):i});function t(i,{indices:n,value:o}){if(i===o)return"";let a="",l=0;n.forEach(u=>{const r=u[1]+1,d=r-u[0]>=e.query.length;a+=[o.substring(l,u[0]),d&&"<mark>",o.substring(u[0],r),d&&"</mark>"].filter(Boolean).join(""),l=r}),a+=o.substring(l);const c=a.indexOf("<mark>");return c>60&&(a=`...${a.substring(c-60)}`),a}return We(()=>He()),{label:s,highlight:t}}}),Fs=["aria-label"],Ls=["innerHTML"];function zs(e,s,t,i,n,o){const a=Ae,l=ct,c=dt,u=te("HComboboxOption");return L(),W("div",{class:F(e.ui.group.wrapper)},[e.label?(L(),W("h2",{key:0,class:F(e.ui.group.label)},oe(e.label),3)):G("",!0),Y("div",{class:F(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(L(!0),W(Ee,null,xe(e.group.commands,(r,d)=>(L(),N(u,{key:`${e.group.key}-${d}`,value:r,disabled:r.disabled,as:"template"},{default:H(({active:h,selected:b})=>[Y("div",{class:F([e.ui.group.command.base,h?e.ui.group.command.active:e.ui.group.command.inactive,r.disabled?"cursor-not-allowed":"cursor-pointer"])},[Y("div",{class:F(e.ui.group.command.container)},[le(e.$slots,`${e.group.key}-icon`,{group:e.group,command:r,active:h,selected:b},()=>[r.icon?(L(),N(a,{key:0,name:r.icon,class:F([e.ui.group.command.icon.base,h?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,r.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):r.avatar?(L(),N(l,ae({key:1,ref_for:!0},{size:e.ui.group.command.avatar.size,...r.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):r.chip?(L(),W("span",{key:2,class:F(e.ui.group.command.chip.base),style:Jt({background:`#${r.chip}`})},null,6)):G("",!0)]),Y("div",{class:F([e.ui.group.command.label,r.disabled&&e.ui.group.command.disabled])},[le(e.$slots,`${e.group.key}-command`,{group:e.group,command:r,active:h,selected:b},()=>{var O,R;return[r.prefix?(L(),W("span",{key:0,class:F(["flex-shrink-0",r.prefixClass||e.ui.group.command.prefix])},oe(r.prefix),3)):G("",!0),Y("span",{class:F(["truncate",{"flex-none":r.suffix||((O=r.matches)==null?void 0:O.length)}])},oe(r[e.commandAttribute]),3),(R=r.matches)!=null&&R.length?(L(),W("span",{key:1,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(r[e.commandAttribute],r.matches[0])},null,10,Ls)):r.suffix?(L(),W("span",{key:2,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix])},oe(r.suffix),3)):G("",!0)]})],2)],2),b?(L(),N(a,{key:0,name:e.selectedIcon,class:F(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):h&&(e.group.active||e.$slots[`${e.group.key}-active`])?le(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:r,active:h,selected:b},()=>[e.group.active?(L(),W("span",{key:0,class:F(e.ui.group.active)},oe(e.group.active),3)):G("",!0)]):le(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:r,active:h,selected:b},()=>{var O;return[(O=r.shortcuts)!=null&&O.length?(L(),W("span",{key:0,class:F(e.ui.group.command.shortcuts)},[(L(!0),W(Ee,null,xe(r.shortcuts,R=>(L(),N(c,{key:R},{default:H(()=>[Qt(oe(R),1)]),_:2},1024))),128))],2)):!r.disabled&&e.group.inactive?(L(),W("span",{key:1,class:F(e.ui.group.inactive)},oe(e.group.inactive),3)):G("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Fs)],2)}const Bs=Object.assign(Ue(Ps,[["render",zs]]),{__name:"UCommandPaletteGroup"}),fe=pt(Re.ui.strategy,Re.ui.commandPalette,vn),js=se({components:{HCombobox:Un,HComboboxInput:Wn,HComboboxOptions:Hn,UIcon:Ae,UButton:ft,CommandPaletteGroup:Bs},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>fe.default.icon},loadingIcon:{type:String,default:()=>fe.default.loadingIcon},selectedIcon:{type:String,default:()=>fe.default.selectedIcon},closeButton:{type:Object,default:()=>fe.default.closeButton},emptyState:{type:Object,default:()=>fe.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:s,expose:t}){const{ui:i,attrs:n}=qe("commandPalette",Se(e,"ui"),fe,Se(e,"class")),o=z(""),a=z(),l=z(null),c=z(!1);ye(()=>{e.autoselect&&j()}),ye(()=>{setTimeout(()=>{var k;const y=(k=a.value)==null?void 0:k.$.provides;if(!y)return;const p=Object.getOwnPropertySymbols(y);l.value=p.length&&y[p[0]]},200)});const u=C(()=>mt({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),r=C(()=>{var p;const y=[];for(const k of e.groups)!k.search&&!k.static&&y.push(...((p=k.commands)==null?void 0:p.map(v=>({...v,group:k.key})))||[]);return y}),d=z({}),{results:h}=_s(o,r,u);function b(y,p){if(y)return y.filter&&typeof y.filter=="function"&&(p=y.filter(o.value,p)),{...y,commands:p.slice(0,u.value.resultLimit)}}const O=C(()=>{if(!h.value)return[];const y=h.value.reduce((g,S)=>{var I;const{item:f,...m}=S;return f.group&&(g[I=f.group]||(g[I]=[]),g[f.group].push({...f,...m})),g},{}),p=Object.entries(y).map(([g,S])=>{const f=e.groups.find(m=>m.key===g);return f?b(f,S):null}).filter(Boolean),k=e.groups.filter(g=>{var S;return!!g.search&&((S=d.value[g.key])==null?void 0:S.length)}).map(g=>{const S=d.value[g.key]||[];return b(g,[...S])}),v=e.groups.filter(g=>{var S;return g.static&&((S=g.commands)==null?void 0:S.length)}).map(g=>b(g,g.commands));return[...p,...k,...v]}),R=gt(async()=>{const y=e.groups.filter(p=>!!p.search);y.length&&(c.value=!0,await Promise.all(y.map(async p=>{d.value[p.key]=await p.search(o.value)})),c.value=!1,T())},e.debounce);X(o,()=>{R(),T()});const P=C(()=>(e.loading||c.value)&&e.loadingIcon?e.loadingIcon:e.icon),$=C(()=>en(i.value.input.icon.base,i.value.input.icon.size,(e.loading||c.value)&&e.loadingIcon&&i.value.input.icon.loading)),w=C(()=>e.emptyState===null?null:{...i.value.default.emptyState,...e.emptyState});function T(){setTimeout(()=>{var y;(y=a.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function j(){setTimeout(()=>{var y;(y=a.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function x(y){s("update:modelValue",y,{query:o.value}),e.autoclear&&setTimeout(()=>{o.value=""},0)}function _(){o.value?o.value="":s("close")}return t({query:o,updateQuery:y=>{o.value=y},comboboxApi:l,results:h}),We(()=>He()),{ui:i,attrs:n,groups:O,comboboxInput:a,query:o,iconName:P,iconClass:$,emptyState:w,onSelect:x,onClear:_}}});function Ds(e,s,t,i,n,o){const a=Ae,l=te("HComboboxInput"),c=ft,u=te("CommandPaletteGroup"),r=te("HComboboxOptions"),d=te("HCombobox");return L(),N(d,ae({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:H(()=>[Xt(Y("div",{class:F(e.ui.input.wrapper)},[e.iconName?(L(),N(a,{key:0,name:e.iconName,class:F(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),ve(l,{ref:"comboboxInput",value:e.query,class:F([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:s[0]||(s[0]=h=>e.query=h.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(L(),N(c,ae({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):G("",!0)],2),[[Zt,e.searchable]]),e.groups.length?(L(),N(r,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:F(e.ui.container)},{default:H(()=>[(L(!0),W(Ee,null,xe(e.groups,h=>(L(),N(u,{key:h.key,query:e.query,group:h,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},ht({_:2},[xe(e.$slots,(b,O)=>({name:O,fn:H(R=>[le(e.$slots,O,ae({ref_for:!0},R))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?le(e.$slots,"empty-state",{key:1},()=>[Y("div",{class:F(e.ui.emptyState.wrapper)},[e.emptyState.icon?(L(),N(a,{key:0,name:e.emptyState.icon,class:F(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),Y("p",{class:F(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},oe(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):G("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const Vs=Object.assign(Ue(js,[["render",Ds]]),{__name:"UCommandPalette"}),Ns=pt(Re.ui.strategy,Re.ui.modal,bn),Ks=se({components:{HDialog:on,HDialogPanel:sn,TransitionRoot:nn,TransitionChild:tn},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:s}){const{ui:t,attrs:i}=qe("modal",Se(e,"ui"),Ns,Se(e,"class")),n=C({get(){return e.modelValue},set(c){s("update:modelValue",c)}}),o=C(()=>e.transition?{...t.value.transition}:{});function a(c){if(e.preventClose){s("close-prevented");return}n.value=c,s("close")}const l=()=>{s("after-leave")};return We(()=>He()),{ui:t,attrs:i,isOpen:n,transitionClass:o,onAfterLeave:l,close:a}}});function Us(e,s,t,i,n,o){const a=te("TransitionChild"),l=te("HDialogPanel"),c=te("HDialog"),u=te("TransitionRoot");return L(),N(u,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:H(()=>[ve(c,ae({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:H(()=>[e.overlay?(L(),N(a,ae({key:0,as:"template",appear:e.appear},e.ui.overlay.transition,{class:e.ui.overlay.transition.enterFrom}),{default:H(()=>[Y("div",{class:F([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear","class"])):G("",!0),Y("div",{class:F(e.ui.inner)},[Y("div",{class:F([e.ui.container,!e.fullscreen&&e.ui.padding])},[ve(a,ae({as:"template",appear:e.appear},e.transitionClass,{class:e.transitionClass.enterFrom}),{default:H(()=>[ve(l,{class:F([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:H(()=>[le(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear","class"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const Ws=Object.assign(Ue(Ks,[["render",Us]]),{__name:"UModal"}),Pt=e=>{if(!e.children)return e._path;for(const s of(e==null?void 0:e.children)||[]){const t=Pt(s);if(t)return t}},Ft=(e,s)=>{for(const t of s){if(t._path===e&&!t._id)return t.children;if(t.children){const i=Ft(e,t.children);if(i)return i}}},Lt=(e,s)=>{for(const t of s){if(t._path===e)return t;if(t.children){const i=Lt(e,t.children);if(i)return i}}},Hs=(e,s,t)=>{let i;const n=(o,a)=>{for(const l of a)if(!(o!=="/"&&l._path==="/")){if(o!=null&&o.startsWith(l._path)&&l[s]&&(i=l[s]),l._path===o)return;l.children&&n(o,l.children)}};return n(e,t),i},qs=()=>({navBottomLink:Pt,navDirFromPath:Ft,navPageFromPath:Lt,navKeyFromPath:Hs});function Gs(...e){return C(()=>e.every(s=>J(s)))}function Ys(e){return C(()=>!J(e))}const Js=/^[^-]+.*-.*[^-]+$/,Qs=/^[^_]+.*_.*[^_]+$/,Xs=(e,s={})=>{const{macOS:t,usingInput:i}=vt();let n=[];const o=z([]),a=()=>{o.value.splice(0,o.value.length)},l=gt(a,s.chainDelay??800),c=u=>{if(!u.key)return;const r=/^[a-z]$/i.test(u.key);let d;if(o.value.push(u.key),o.value.length>=2){d=o.value.slice(-2).join("-");for(const h of n.filter(b=>b.chained))if(h.key===d){h.condition.value&&(u.preventDefault(),h.handler()),a();return}}for(const h of n.filter(b=>!b.chained))if(u.key.toLowerCase()===h.key&&u.metaKey===h.metaKey&&u.ctrlKey===h.ctrlKey&&!(r&&u.shiftKey!==h.shiftKey)){h.condition.value&&(u.preventDefault(),h.handler()),a();return}l()};n=Object.entries(e).map(([u,r])=>{var O,R;if(!r)return null;let d;u.includes("-")&&u!=="-"&&!((O=u.match(Js))!=null&&O.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`),u.includes("_")&&u!=="_"&&!((R=u.match(Qs))!=null&&R.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`);const h=u.includes("-")&&u!=="-";if(h)d={key:u.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const P=u.toLowerCase().split("_").map($=>$);d={key:P.filter($=>!["meta","ctrl","shift","alt"].includes($)).join("_"),metaKey:P.includes("meta"),ctrlKey:P.includes("ctrl"),shiftKey:P.includes("shift"),altKey:P.includes("alt")}}if(d.chained=h,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof r=="function"?d.handler=r:typeof r=="object"&&(d={...d,handler:r.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const b=[];return r.usingInput?typeof r.usingInput=="string"&&b.push(C(()=>i.value===r.usingInput)):b.push(Ys(i)),d.condition=Gs(...b,...r.whenever||[]),d}).filter(Boolean),ln("keydown",c)},Zs=se({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:s,emit:t}){const i=an(),n=C(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:i.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),o=e,a=t,l=rn(),{navKeyFromPath:c}=qs(),{usingInput:u}=vt(),{isContentSearchModalOpen:r}=un(),d=mn(gn),h=cn(),{ui:b,attrs:O}=qe("content.search",Se(o,"ui"),n,void 0,!0),R=d.smaller("sm"),P=z();function $(f){var m;return f.icon?f.icon:(m=f.navigation)!=null&&m.icon?f.navigation.icon:(o.navigation&&(f.icon=c(f._path,"icon",o.navigation)),f.icon||b.value.fileIcon.name)}const w=C({get(){return o.modelValue!==void 0?o.modelValue:r.value},set(f){o.modelValue!==void 0?a("update:modelValue",f):r.value=f}}),T=C(()=>mt({},o.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function j(f,m){return f?m:m==null?void 0:m.filter(I=>!I.child)}const x=C(()=>{var m,I;let f=[];return(m=o.navigation)!=null&&m.length&&(o.navigation.some(M=>{var A;return!!((A=M.children)!=null&&A.length)})?f=(o.navigation||[]).map(M=>({key:M._path,label:M.title,commands:(o.files||[]).filter(A=>{var D;return(D=A._path)==null?void 0:D.startsWith(M._path)}).flatMap(A=>y(A,M)),filter:j})):f=[{key:"docs",commands:(o.files||[]).flatMap(M=>y(M)),filter:j}]),[((I=o.links)==null?void 0:I.length)&&{key:"links",label:"Links",commands:o.links.flatMap(M=>[M.to&&{id:l.resolve(M.to).fullPath,...M,icon:M.icon||b.value.fileIcon.name},...(M.children||[]).map(A=>({id:l.resolve(A.to).fullPath,prefix:M.label,suffix:A.description,...A,icon:A.icon||M.icon||b.value.fileIcon.name}))]).filter(Boolean)},...f,...o.groups||[],!(h!=null&&h.forced)&&!o.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:i.ui.icons.light,disabled:h.preference==="light",click:()=>{h.preference="light"}},{id:"theme-dark",label:"Dark",icon:i.ui.icons.dark,disabled:h.preference==="dark",click:()=>{h.preference="dark"}}]}].filter(Boolean)}),_=C(()=>w.value||!u.value);function y(f,m){var M,A,D,Z,me;const I=(M=dn((m==null?void 0:m.children)||[],f))==null?void 0:M.map(({title:q})=>q).join(" > ");return[{id:f._id,label:((A=f.navigation)==null?void 0:A.title)||f.title,title:((D=f.navigation)==null?void 0:D.title)||f.title,prefix:I,to:f._path,suffix:f.description,children:k(v(((Z=f==null?void 0:f.body)==null?void 0:Z.children)||[])),icon:$(f)},...Object.entries(g(((me=f==null?void 0:f.body)==null?void 0:me.children)||[])).map(([q,{title:ue,children:Oe}])=>{var ge;if(ue)return{id:`${f._path}${q}`,label:ue,prefix:(I?`${I} > `:"")+`${((ge=f.navigation)==null?void 0:ge.title)||f.title}`,to:`${f._path}${q}`,children:k(Oe),icon:$(f),child:!0}})].filter(Boolean)}function p(f){return(f==null?void 0:f.map(m=>{var I,M;if(["code","code-inline","em","a","strong"].includes(m.tag))return{type:"text",value:((M=(I=m.children)==null?void 0:I.find(A=>A.type==="text"))==null?void 0:M.value)||""};if(m.type==="text")return m}).filter(Boolean))||[]}function k(f){return f.map(m=>{if(["pre","style","video"].includes(m.tag))return;let I=[...m.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(m.tag)&&I.length?(I=p(I).reduce((M,A)=>(M.length&&M[M.length-1].type==="text"?M[M.length-1].value+=A.value||"":M.push({...A}),M),[]),{...m,children:I}):{...m,children:k(I)}}).filter(Boolean)}function v(f){const m=[];for(const I of f){if(["h1","h2","h3"].includes(I.tag))break;m.push(I)}return m}function g(f){var A,D,Z,me;const m={};let I="",M="";for(const q of f)["h1","h2","h3"].includes(q.tag)&&(M=((Z=(D=(A=q.children)==null?void 0:A.map(ue=>{var Oe,ge;if(ue.type==="text")return ue.value;if(["code","code-inline","em","a","strong"].includes(ue.tag))return(ge=(Oe=ue.children)==null?void 0:Oe.find(zt=>zt.type==="text"))==null?void 0:ge.value}))==null?void 0:D.filter(Boolean))==null?void 0:Z.join(" "))||"",M&&((me=q.props)!=null&&me.id)&&(I=`#${encodeURIComponent(q.props.id)}`)),m[I]?m[I].children.push(q):m[I]={children:[q],title:M};return m}function S(f){w.value=!1;const m=f[0];m&&(m.click?m.click():m.to?m.target==="_blank"||m.to.startsWith("http")?window.open(m.to,m.target||"_blank"):l.push(m.to):m.href&&window.open(m.href,"_blank"))}return Xs({meta_k:{usingInput:!0,whenever:[_],handler:()=>{w.value=!w.value}},escape:{usingInput:!0,whenever:[w],handler:()=>{w.value=!1}}}),s({commandPaletteRef:P}),(f,m)=>{const I=Vs,M=Ws;return L(),N(M,{modelValue:K(w),"onUpdate:modelValue":m[1]||(m[1]=A=>pn(w)?w.value=A:null),overlay:!K(R),transition:!K(R),ui:K(b)},{default:H(()=>[ve(I,ae({ref_key:"commandPaletteRef",ref:P,"model-value":[],groups:K(x),ui:K(b).commandPalette,"close-button":K(b).default.closeButton,fuse:K(T),multiple:""},K(O),{"onUpdate:modelValue":S,onClose:m[0]||(m[0]=A=>w.value=!1)}),ht({_:2},[xe(f.$slots,(A,D)=>({name:D,fn:H(Z=>[le(f.$slots,D,fn(hn(Z)))])}))]),1040,["groups","ui","close-button","fuse"])]),_:3},8,["modelValue","overlay","transition","ui"])}}}),ni=Object.assign(Zs,{__name:"UContentSearch"});export{ni as default};
